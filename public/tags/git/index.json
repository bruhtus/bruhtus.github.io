[
    {
        "ref": "https://bruhtus.github.io/posts/git-repo-backup/",
        "title": "Git Repository Backup",
        "section": "posts",
        "tags": ["Git"],
        "date" : "2021.01.18",
        "body": " Have you ever thought that some day your git remote repository service account got banned or even their server went down? It always crossed my mind and if that happen i would lose all my source code. So in this post i\u0026rsquo;m gonna explain how to backup your git repository locally and to other git remote repository services.\n Skip-able Part Git is a version control system for tracking any changes in any set of files. It\u0026rsquo;s basically a tool that makes tracking changes on your code easier, so you would know which line fix a certain bug and so on.\nThere\u0026rsquo;re a lot of git remote repository such as github, gitlab, bitbucket, codeberg and so on. The most popular one is github, but like other platform, github could decide whether to let you continue in their platform or banned you in their platform. You can check an article about github banned developer account on here and it seems like github in the process of restoring access to all developer in iran, you can check the github CEO tweet here .\nYou might be thinking \u0026ldquo;well, i\u0026rsquo;m not on those country so why should i worry about that?\u0026rdquo;. My point is not about the country that got banned, but about what would you do if your account got banned and all access to you code was gone. We can\u0026rsquo;t take anything for granted these days so better start backup your git repository rather than regret it later.\nBackup Git Repository First of all, there\u0026rsquo;re two ways you can backup a git repository that i knew. The first one is to backup locally in your machine, and the second one is to backup on multiple platforms or even on your own server.\nBackup Git Repository Locally There\u0026rsquo;re two ways to backup your git repository locally on your local machine, that is clone everything (basically the normal git clone command) and clone git bare.\nClone Everything in Git Repository You can backup every file in your git repository by doing the normal git clone \u0026lt;git-url.git\u0026gt; command. By doing that, you download every file in your repository with their actual size and you can do git workflow in it.\nIt\u0026rsquo;s basically the usual way to clone a git repository.\nClone Git Bare You can backup only the git bare from a git repository. To make it simpler, git bare is a .git directory when you initialize a directory as a git repository using git init command.\nSo if you clone the git bare instead of the full git repository, you can get all commit history and all the branch on your git repository without actually downloading all your file so the git bare size is quite small.\nYou might ask \u0026ldquo;if you didn\u0026rsquo;t download all your file then how you called that a backup?\u0026rdquo;. Ok so here\u0026rsquo;s the thing, by cloning a git bare you backup all your commit history and if you decide to upload your git repository to another git services or even your own server, you just need to push those git bare backup and git gonna create all your file with all the commit history on the new git repository. So basically you have your git repository backup without taking too much space on your local storage.\nSo, how can you backup using git bare clone? git have a backup mechanism but it\u0026rsquo;s not obvious, git has a --mirror flag that you can use to backup or push a git bare repository.\nFirst, you need to clone a git bare from git repository by doing\n1git clone --bare \u0026lt;git-repo-url.git\u0026gt; or\n1git clone --mirror \u0026lt;git-repo-url.git\u0026gt;  Both of the commands are basically the same, you can push using --mirror flag or add git remote repository and then push using the usual command. How to push with git bare repository is later in this post.\n Here\u0026rsquo;s an example, if i want to clone my instasaver git bare then the command i need is\n1git clone --bare https://github.com/bruhtus/instasaver.git or\n1git clone --mirror https://github.com/bruhtus/instasaver.git and then it\u0026rsquo;s gonna make instasaver.git directory where it stores all the commit history and branch.\nIf your git repository contains Git Large File Storage (LFS) objects then you need to download those git LFS objects too. First, you clone git bare with one of the command above (--mirror flag or --bare flag) and then download git LFS object with this command\n1git lfs fetch --all  Don\u0026rsquo;t forget to change directory (cd) into your git bare directory before applying those command.\n Backup Git Repository on Multiple Platforms There\u0026rsquo;re two ways you can backup your git repository on multiple platforms. First, you can use git remote add command, and second, you can push git bare repository into another git services. Uploading into your own server is beyond the scope of this post, so i\u0026rsquo;m not gonna explain about that here.\nAdd Git Remote Repository With git remote add you can add another platform so that you can also push into that platform.\nFor example, your main git repository service is github so you usually do\n1git remote add origin \u0026lt;github-repo-url.git\u0026gt; in your local git repository. That command is basically assign origin as your github repository, so if you want to push into your github repository you need to do\n1git push origin \u0026lt;branch\u0026gt; if you didn\u0026rsquo;t like origin as your github repository alias, you can change it to whatever you want, you can change it into github or even anu but you also need to change your git push command like this\n1git push github \u0026lt;branch\u0026gt; or\n1git push anu \u0026lt;branch\u0026gt; So if you want to add another platform and you have your full git working directory (not git bare version), you just need too assign another git repository service url.\nFor example, i want to add instasaver to gitlab. I just need to do\n1git remote add gitlab https://gitlab.com/bruhtus/instasaver.git and then if i want to push the changes to master branch, i just need to do\n1git push gitlab master other git workflow such as git add and git commit is the same.\n Don\u0026rsquo;t forget to change directory (cd) into your local git repo directory.\n Push Git Bare If you alreaady backup your git bare repository on your local machine, then all you gotta do is change directory (cd) into your git-bare-repo.git directory and then do\n1git push --mirror \u0026lt;new-git-repo-url.git\u0026gt; or you could also do\n1git remote add \u0026lt;platform\u0026gt; \u0026lt;new-git-repo-url.git\u0026gt; 2git push \u0026lt;platform\u0026gt; \u0026lt;branch\u0026gt;  You can change \u0026lt;platform\u0026gt; name to whatever you want such as anu or nganu, you do you.\n The difference between both command is that you can get all the branch if you use git push --mirror meanwhile you only get main branch if you use the usual git push command (without --mirror flag). So if you want to backup all the branch then you should probably use git push --mirror.\nThe disadvantage of using git bare is that you cannot use git workflow such as git add or git commit, you can only use git push command. If you want to update your git bare repository, you can do\n1git remote update inside your git bare directory.\nIf you have Git Large File Storage (LFS) objects, you need to push git LFS object separately using this command\n1git lfs push --all \u0026lt;new-git-repo-url.git\u0026gt; after you download all git LFS objects using git lfs fetch --all command.\nThe Conclusion  Do this post really need a conclusion? well, whatever, here we go.\n There\u0026rsquo;s no harm in backing up your git repository whether locally or on multiple platform, we can\u0026rsquo;t be so sure that some platform gonna stay the same. Maybe the platform we use gonna become worse and mindlessly banned a lot of account, who knows. So it\u0026rsquo;s better to start backup your git repository from now on before something like that happen.\nReferences  How to backup a git repository . How to mirror an entire existing git repository . Duplicating a repository . The difference between git clone \u0026ndash;mirror and git clone \u0026ndash;bare .  "
    }
]
