[{"ref":"https://bruhtus.github.io/posts/flashing-skeletyl-keyboard-with-miryoku-layout/","title":"Flashing Skeletyl Keyboard With Miryoku Layout","section":"posts","tags":["Keyboard"],"date":"2025.07.13","body":"Setup Miryoku in QMK Disclaimer:\nBy the time of writing this post, there\u0026rsquo;s a breaking change in QMK that remove user keymaps, including miryoku. And miryoku QMK haven\u0026rsquo;t porting it\u0026rsquo;s config in the new QMK userspace. So this section might become obsolete in the future. For reference: https://github.com/manna-harbour/miryoku/discussions/287 First thing we need to do is to setup QMK. We can check the QMK documentation below:\nhttps://github.com/qmk/qmk_firmware/blob/master/docs/newbs_getting_started.md To check if QMK already installed on linux, we can use this command:\ncommand -v qmk if there\u0026rsquo;s any output, it means QMK is already installed. If there\u0026rsquo;s no output, try again.\nAfter QMK is installed, we need to setup QMK with this command:\nqmk setup By default, the installation directory will be on our home directory. If we don\u0026rsquo;t want to put the QMK installation on my home directory, we can add -H flag to move the installation directory to somewhere else, like this:\nqmk setup -H all-repos/qmk_firmware If the setup already finished, try running:\nqmk doctor and see if there\u0026rsquo;s any issue with the installation.\n If you see a warning about 50-qmk.rules, we might to copy 50-qmk.rules to /etc/udev/rules.d/. Like this: cp path/to/50-qmk.rules /etc/udev/rules.d\n After that, we need to change our working directory qmk_firmware. In qmk_firmware directory, we need to add miryoku_qmk fork like this:\ngit remote add miryoku_qmk https://github.com/manna-harbour/miryoku_qmk.git git fetch miryoku_qmk git checkout --track miryoku_qmk/miryoku And then we need to merge miryoku with QMK master branch like this:\ngit checkout -b miryoku-merge-master git revert --no-edit `git log --grep=\u0026#39;^\\[miryoku-github\\]\u0026#39; --pretty=\u0026#39;format:%H\u0026#39; | tr \u0026#39;\\n\u0026#39; \u0026#39; \u0026#39;` git fetch origin git merge origin/master and solve all conflict.\nAfter that, we need to copy layouts/community/split_3x5_3/manna-harbour_miryoku/ from miryoku branch into keyboards/bastardkb/skeletyl/keymaps/ in miryoku-merge-master branch. We also need to copy users/manna-harbour_miryoku/ from miryoku branch to users/ in miryoku-merge-master branch.\nAfter that, we need to run this command:\nmake git-submodule Next, we need to make sure that we can compile the miryoku layout by running this command:\nqmk compile -c -kb bastardkb/skeletyl/v2/splinky_3 -km manna-harbour_miryoku -e MIRYOKU_ALPHAS=QWERTY -e MIRYOKU_LAYERS=FLIP -e MIRYOKU_NAV=INVERTEDT  I prefer to use qwerty layout, so i add flag -e MIRYOKU_ALPHAS=QWERTY. Also my unit using rp2040, that\u0026rsquo;s why i\u0026rsquo;m using splinky_3. I\u0026rsquo;m not sure the difference between splinky_2 and splinky_3, and the reason i\u0026rsquo;m using splinky_3 instead of splinky_2 is because i think splinky_3 is the latest version of splinky variant. I prefer to use space on the right side, hence why i put flag -e MIRYOKU_LAYERS=FLIP to flip the base layer thumb keys and sub layers between right and left hands. I also prefer using arrow key in inverted T model, like asdw in fps game, hence why i put flag -e MIRYOKU_NAV=INVERTEDT.\n If there\u0026rsquo;s no error, we can go into the next section. If there\u0026rsquo;s some error, we might need to adjust a few things. Check this discussion and see if this changes fix the error:\n https://github.com/manna-harbour/miryoku/discussions/361  https://github.com/manna-harbour/miryoku/discussions/361#discussioncomment-12243200   Flashing Skeletyl Keyboard The first thing we need to do is make our keyboard enter bootloader mode. In skeletyl keyboard, we can use the update button at the bottom of the keyboard. For more info, we can check this guide:\nhttps://docs.bastardkb.com/fw/flashing.html  Because we using new firmware, we can flash both side with the same firmware.\n After our keyboard enter bootloader mode, we need to mount our micro controller to our linux system. We can use lsblk to find out our micro controller partition name and mount those partition. For example, if our micro controller partition name is sda1, we can use this command to mount our micro controller partition:\nsudo mount /dev/sda1 /mnt After that, we can run this command to flash our micro controller with firmware that has miryoku layout in it:\nqmk flash -c -kb bastardkb/skeletyl/v2/splinky_3 -km manna-harbour_miryoku -e MIRYOKU_ALPHAS=QWERTY -e MIRYOKU_LAYERS=FLIP -e MIRYOKU_NAV=INVERTEDT If there\u0026rsquo;s no error, we can use our skeletyl keyboard with miryoku layout after the flashing process finish. If there\u0026rsquo;s an error, you might want to take a look at miryoku discussion or issue on github.\nIf the skeletyl keyboard is not usable after booting up the computer, we can add #define USB_VBUS_PIN GP19 in file keyboards/bastardkb/skeletyl/v2/splinky_3/config.h. Defining USB_VBUS_PIN will allow us to tell the controller whether it\u0026rsquo;s master or slave right away, resulting in immediate boot for both sides. After defining USB_VBUS_PIN, we can flashing both side of the keyboard again using the command above.\nAll right, that\u0026rsquo;s it. See you next time!\nSide Note Currently the right side of miryoku qwerty layout using hjkl' instead of hjkl;, so you might be surprised the first time using miryoku qwerty layout. There\u0026rsquo;s a plan to customize that, but as of writing this post, it\u0026rsquo;s still work in progress. You can check this discussion to see the progress:\nhttps://github.com/manna-harbour/miryoku/discussions/85 References  Miryoku reference manual  Miryoku build guide  Miryoku breaking change QMK discussion  Skeletyl flashing firmware guide  Github issue QMK rp2040 not usable from boot  Skeletyl USB VBUS PIN for splinky controllers   "},{"ref":"https://bruhtus.github.io/posts/simple-guide-qmk-flashing-cli/","title":"Simple Guide Flashing Mechanical Keyboard with QMK CLI","section":"posts","tags":["Keyboard"],"date":"2023.02.26","body":"A Brief Intro So recently, around the time i wrote this post, i need to flash my mechanical keyboard. The harsh thing is that, the GUI QMK toolbox only available on windows and macOS, meanwhile i use linux.\nSo, i need to use the QMK CLI to flash my mechanical keyboard. This post is some kind of notes for my future self.\n\u0026ldquo;Humans live by forgetting\u0026rdquo;, some people said. Without further ado, let\u0026rsquo;s get started!\nInstall QMK Firmware First thing first, we need to check if QMK firmware already installed on our system. We can do that with the command below:\ncommand -v qmk If the output is empty, then we need to install QMK firmware first. If the output is not empty, we can skip this process.\nThere\u0026rsquo;s a newbie guide on how to install QMK firmware on linux, we can them out here .\nThere are a few options to install QMK firmware on linux. We can install QMK firmware with our linux distro package manager or from python pip.\nIn this post, we will use python pipx to install QMK firmware. We can install QMK firmware from python pipx with this command:\npipx install qmk  Make sure you already have pipx installed on your machine.\n Follow the instruction from the installation process, including installing dependencies on your system and copy the 50-qmk.rules to /etc/udev/rules.d/.\n Copying the 50-qmk.rules make QMK can detect the bootloader of our mechanical keyboard. If we didn\u0026rsquo;t do that, even if our mechanical keyboard already in bootloader mode, QMK won\u0026rsquo;t be able to detect our mechanical keyboard.\n After we install QMK firmware, we need to setup the QMK CLI. We can do that with this command:\nqmk setup By default, the installation directory will be on our home directory. Personally i don\u0026rsquo;t really want to put the QMK installation on my home directory, so i added -H flag to move the installation directory to somewhere else, like this:\nqmk setup -H all-repos/qmk_firmware If the setup already finished, try running:\nqmk doctor and see if there\u0026rsquo;s any issue with the installation.\nFlashing with QMK CLI There\u0026rsquo;s a newbie guide on how to flash our mechanical keyboard using QMK CLI, we can find it here .\nThe point is, we need to know if our mechanical keyboard supported by QMK. We can check the supported mechanical keyboard here .\nLet\u0026rsquo;s say our mechanical keyboard is dz60rgb with ansi layout version 1, we can flash our mechanical keyboard with this command:\nqmk flash -kb dztech/dz60rgb_ansi/v1 -km default  For more info about the flags, we can use qmk flash --help.\n Unfortunately, my current mechanical keyboard is not supported, which is synthesis60 version 2. I need to get the hex file from the mechanical keyboard designer (and fortunately he\u0026rsquo;s within reach).\n In case you also need the synthesis60 version 2 hex file, you can check it here .\n So, to use our own hex file rather than using the default that QMK supported, we can use this command:\nqmk flash \u0026lt;path-to-hex-file\u0026gt; Here\u0026rsquo;s an example:\nqmk flash ~/downloads/dyz_synthesis60_atmega_vial.hex All right, that\u0026rsquo;s it from me. See you next time!\nReferences  QMK newbie getting started guide . QMK newbie flashing guide . Using QMK flash with the external file .  "}]