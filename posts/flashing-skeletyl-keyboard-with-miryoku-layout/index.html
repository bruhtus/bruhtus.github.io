<!doctype html><html>
<head>
<title>
Flashing Skeletyl Keyboard With Miryoku Layout
</title>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=author content="Robertus Chris">
<link rel="shortcut icon" type=image/x-icon href=https://bruhtus.github.io/img/favicon.ico>
<link rel=stylesheet href=https://bruhtus.github.io/style.min.4f970aa135421035a71bdc9bbd750aa2cfbe0ddb080ab1ec5db4173f45494cad.css integrity="sha256-T5cKoTVCEDWnG9ybvXUKos++DdsICrHsXbQXP0VJTK0=">
<link disabled rel=stylesheet href=https://bruhtus.github.io/style-dark.min.0a647fb6c07e04b77b54fa0515d0a683d39ecdb251dba960fe1f966f7ff36fc2.css media="(prefers-color-scheme: dark)" integrity="sha256-CmR/tsB+BLd7VPoFFdCmg9OezbJR26lg/h+Wb3/zb8I=">
<link rel=stylesheet href=https://use.fontawesome.com/releases/v5.8.1/css/all.css integrity=sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf crossorigin=anonymous>
<link rel=preconnect href=https://fonts.gstatic.com>
<link href="https://fonts.googleapis.com/css2?family=Bitter:wght@300&family=EB+Garamond&family=PT+Sans&family=Sura&family=Zilla+Slab&family=Inconsolata&family=Libre+Baskerville&display=swap" rel=stylesheet>
<link rel=stylesheet href=https://bruhtus.github.io/css/custom.css>
<meta property="og:title" content="Flashing Skeletyl Keyboard With Miryoku Layout">
<meta property="og:description" content="Setup Miryoku in QMK Disclaimer:
By the time of writing this post, there&rsquo;s a breaking change in QMK that remove user keymaps, including miryoku. And miryoku QMK haven&rsquo;t porting it&rsquo;s config in the new QMK userspace. So this section might become obsolete in the future. For reference: https://github.com/manna-harbour/miryoku/discussions/287 First thing we need to do is to setup QMK. We can check the QMK documentation below:
https://github.com/qmk/qmk_firmware/blob/master/docs/newbs_getting_started.md To check if QMK already installed on linux, we can use this command:">
<meta property="og:type" content="article">
<meta property="og:url" content="https://bruhtus.github.io/posts/flashing-skeletyl-keyboard-with-miryoku-layout/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2025-07-13T07:55:26+07:00">
<meta property="article:modified_time" content="2025-07-13T07:55:26+07:00">
<meta itemprop=name content="Flashing Skeletyl Keyboard With Miryoku Layout">
<meta itemprop=description content="Setup Miryoku in QMK Disclaimer:
By the time of writing this post, there&rsquo;s a breaking change in QMK that remove user keymaps, including miryoku. And miryoku QMK haven&rsquo;t porting it&rsquo;s config in the new QMK userspace. So this section might become obsolete in the future. For reference: https://github.com/manna-harbour/miryoku/discussions/287 First thing we need to do is to setup QMK. We can check the QMK documentation below:
https://github.com/qmk/qmk_firmware/blob/master/docs/newbs_getting_started.md To check if QMK already installed on linux, we can use this command:"><meta itemprop=datePublished content="2025-07-13T07:55:26+07:00">
<meta itemprop=dateModified content="2025-07-13T07:55:26+07:00">
<meta itemprop=wordCount content="811">
<meta itemprop=keywords content="Notes,Linux,"><!--[if lte IE 9]><script src=https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js></script><![endif]--><!--[if lt IE 9]><script src=https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js></script>
<script src=https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js></script><![endif]-->
</head>
<body>
<h1>Flashing Skeletyl Keyboard With Miryoku Layout</h1>
<header>
<div class=cd>
<h2><a style=text-decoration:none class=cd href=https://bruhtus.github.io/posts>cd ..</a> || <a style=text-decoration:none class=cd href=https://bruhtus.github.io/>cd</a></h2>
</div>
</header>
<p class=date>
July 13, 2025
<span>&#183;</span>
4 mins
<span>&#183;</span>
Robertus Chris
</p>
<div id=tags>
<ul>
<li><a style=text-decoration:none href=https://bruhtus.github.io/tags/notes/>Notes</a></li>
<li><a style=text-decoration:none href=https://bruhtus.github.io/tags/linux/>Linux</a></li>
</ul>
</div>
<div class=toc>
<details>
<summary>
<div class=details>Table of Contents</div>
</summary>
<blockquote><ul><li>
<a style=text-decoration:none href=#setup-miryoku-in-qmk aria-label="Setup Miryoku in QMK">Setup Miryoku in QMK</a></li><li>
<a style=text-decoration:none href=#flashing-skeletyl-keyboard aria-label="Flashing Skeletyl Keyboard">Flashing Skeletyl Keyboard</a></li><li>
<a style=text-decoration:none href=#side-note aria-label="Side Note">Side Note</a></li><li>
<a style=text-decoration:none href=#references aria-label=References>References</a></li></ul>
</blockquote>
</details>
</div>
<div id=contentBody>
<h2 id=setup-miryoku-in-qmk>Setup Miryoku in QMK</h2>
<p><strong>Disclaimer</strong>:<br>
By the time of writing this post, there&rsquo;s a breaking change in QMK that remove
user keymaps, including miryoku. And miryoku QMK haven&rsquo;t porting it&rsquo;s config
in the new QMK userspace. So this section might become obsolete in the future.
For reference: <a href=https://github.com/manna-harbour/miryoku/discussions/287 target=_blank rel="noreferrer noopener">https://github.com/manna-harbour/miryoku/discussions/287</a>
</p>
<p>First thing we need to do is to setup QMK. We can check the QMK documentation
below:<br>
<a href=https://github.com/qmk/qmk_firmware/blob/master/docs/newbs_getting_started.md target=_blank rel="noreferrer noopener">https://github.com/qmk/qmk_firmware/blob/master/docs/newbs_getting_started.md</a>
</p>
<p>To check if QMK already installed on linux, we can use this command:</p>
<div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-sh data-lang=sh><span style=color:#24909d>command</span> -v qmk
</code></pre></div><p>if there&rsquo;s any output, it means QMK is already installed. If there&rsquo;s no
output, try again.</p>
<p>After QMK is installed, we need to setup QMK with this command:</p>
<div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-sh data-lang=sh>qmk setup
</code></pre></div><p>By default, the installation directory will be on our home directory.
If we don&rsquo;t want to put the QMK installation on my home directory, we can add
<code>-H</code> flag to move the installation directory to somewhere else, like this:</p>
<div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-sh data-lang=sh>qmk setup -H all-repos/qmk_firmware
</code></pre></div><p>If the setup already finished, try running:</p>
<div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-sh data-lang=sh>qmk doctor
</code></pre></div><p>and see if there&rsquo;s any issue with the installation.</p>
<blockquote>
<p>If you see a warning about 50-qmk.rules, we might to copy 50-qmk.rules to
/etc/udev/rules.d/. Like this: cp path/to/50-qmk.rules /etc/udev/rules.d</p>
</blockquote>
<p>After that, we need to change our working directory <code>qmk_firmware</code>. In
<code>qmk_firmware</code> directory, we need to add <code>miryoku_qmk</code> fork like this:</p>
<div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-sh data-lang=sh>git remote add miryoku_qmk https://github.com/manna-harbour/miryoku_qmk.git
git fetch miryoku_qmk
git checkout --track miryoku_qmk/miryoku
</code></pre></div><p>And then we need to merge <code>miryoku</code> with QMK <code>master</code> branch like this:</p>
<div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-sh data-lang=sh>git checkout -b miryoku-merge-master
git revert --no-edit <span style=color:#ed9d13>`</span>git log --grep=<span style=color:#ed9d13>&#39;^\[miryoku-github\]&#39;</span> --pretty=<span style=color:#ed9d13>&#39;format:%H&#39;</span> | tr <span style=color:#ed9d13>&#39;\n&#39;</span> <span style=color:#ed9d13>&#39; &#39;</span><span style=color:#ed9d13>`</span>
git fetch origin
git merge origin/master
</code></pre></div><p>and solve all conflict.</p>
<p>After that, we need to copy
<code>layouts/community/split_3x5_3/manna-harbour_miryoku/</code> from <code>miryoku</code> branch
into <code>keyboards/bastardkb/skeletyl/keymaps/</code> in <code>miryoku-merge-master</code> branch.
We also need to copy <code>users/manna-harbour_miryoku/</code> from <code>miryoku</code> branch to
<code>users/</code> in <code>miryoku-merge-master</code> branch.</p>
<p>After that, we need to run this command:</p>
<div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-sh data-lang=sh>make git-submodule
</code></pre></div><p>Next, we need to make sure that we can compile the <code>miryoku</code> layout by running
this command:</p>
<div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-sh data-lang=sh>qmk compile -c -kb bastardkb/skeletyl/v2/splinky_3 -km manna-harbour_miryoku -e <span style=color:#40ffff>MIRYOKU_ALPHAS</span>=QWERTY -e <span style=color:#40ffff>MIRYOKU_LAYERS</span>=FLIP -e <span style=color:#40ffff>MIRYOKU_NAV</span>=INVERTEDT
</code></pre></div><blockquote>
<p>I prefer to use qwerty layout, so i add flag <code>-e MIRYOKU_ALPHAS=QWERTY</code>. Also
my unit using <code>rp2040</code>, that&rsquo;s why i&rsquo;m using <code>splinky_3</code>. I&rsquo;m not sure the
difference between <code>splinky_2</code> and <code>splinky_3</code>, and the reason i&rsquo;m using
<code>splinky_3</code> instead of <code>splinky_2</code> is because i think <code>splinky_3</code> is the
latest version of <code>splinky</code> variant. I prefer to use space on the right
side, hence why i put flag <code>-e MIRYOKU_LAYERS=FLIP</code> to flip the base layer
thumb keys and sub layers between right and left hands. I also prefer using
arrow key in inverted T model, like <code>asdw</code> in fps game, hence why i put flag
<code>-e MIRYOKU_NAV=INVERTEDT</code>.</p>
</blockquote>
<p>If there&rsquo;s no error, we can go into the next section. If there&rsquo;s some error,
we might need to adjust a few things. Check this discussion and see if this
changes fix the error:</p>
<ul>
<li><a href=https://github.com/manna-harbour/miryoku/discussions/361 target=_blank rel="noreferrer noopener">https://github.com/manna-harbour/miryoku/discussions/361</a>
</li>
<li><a href=https://github.com/manna-harbour/miryoku/discussions/361#discussioncomment-12243200 target=_blank rel="noreferrer noopener">https://github.com/manna-harbour/miryoku/discussions/361#discussioncomment-12243200</a>
</li>
</ul>
<h2 id=flashing-skeletyl-keyboard>Flashing Skeletyl Keyboard</h2>
<p>The first thing we need to do is make our keyboard enter bootloader mode. In
skeletyl keyboard, we can use the <code>update</code> button at the bottom of the
keyboard. For more info, we can check this guide:<br>
<a href=https://docs.bastardkb.com/fw/flashing.html target=_blank rel="noreferrer noopener">https://docs.bastardkb.com/fw/flashing.html</a>
</p>
<blockquote>
<p>Because we using new firmware, we can flash both side with the same
firmware.</p>
</blockquote>
<p>After our keyboard enter bootloader mode, we need to mount our micro
controller to our linux system. We can use <code>lsblk</code> to find out our micro
controller partition name and mount those partition. For example, if our micro
controller partition name is <code>sda1</code>, we can use this command to mount our
micro controller partition:</p>
<div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-sh data-lang=sh>sudo mount /dev/sda1 /mnt
</code></pre></div><p>After that, we can run this command to flash our micro controller with
firmware that has miryoku layout in it:</p>
<div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-sh data-lang=sh>qmk flash -c -kb bastardkb/skeletyl/v2/splinky_3 -km manna-harbour_miryoku -e <span style=color:#40ffff>MIRYOKU_ALPHAS</span>=QWERTY -e <span style=color:#40ffff>MIRYOKU_LAYERS</span>=FLIP -e <span style=color:#40ffff>MIRYOKU_NAV</span>=INVERTEDT
</code></pre></div><p>If there&rsquo;s no error, we can use our skeletyl keyboard with miryoku layout
after the flashing process finish. If there&rsquo;s an error, you might want to take
a look at miryoku discussion or issue on github.</p>
<p>If the skeletyl keyboard is not usable after booting up the computer, we can
add <code>#define USB_VBUS_PIN GP19</code> in file
<code>keyboards/bastardkb/skeletyl/v2/splinky_3/config.h</code>. Defining <code>USB_VBUS_PIN</code>
will allow us to tell the controller whether it&rsquo;s master or slave right away,
resulting in immediate boot for both sides. After defining <code>USB_VBUS_PIN</code>, we
can flashing both side of the keyboard again using the command above.</p>
<p>All right, that&rsquo;s it. See you next time!</p>
<h2 id=side-note>Side Note</h2>
<p>Currently the right side of miryoku qwerty layout using <code>hjkl'</code> instead of
<code>hjkl;</code>, so you might be surprised the first time using miryoku qwerty layout.
There&rsquo;s a plan to customize that, but as of writing this post, it&rsquo;s still work
in progress. You can check this discussion to see the progress:<br>
<a href=https://github.com/manna-harbour/miryoku/discussions/85 target=_blank rel="noreferrer noopener">https://github.com/manna-harbour/miryoku/discussions/85</a>
</p>
<h2 id=references>References</h2>
<ul>
<li><a href=https://github.com/manna-harbour/miryoku/tree/master/docs/reference target=_blank rel="noreferrer noopener">Miryoku reference
manual</a>
</li>
<li><a href=https://github.com/manna-harbour/miryoku_qmk/tree/miryoku/users/manna-harbour_miryoku target=_blank rel="noreferrer noopener">Miryoku build
guide</a>
</li>
<li><a href=https://github.com/manna-harbour/miryoku/discussions/287 target=_blank rel="noreferrer noopener">Miryoku breaking change QMK
discussion</a>
</li>
<li><a href=https://docs.bastardkb.com/fw/flashing.html target=_blank rel="noreferrer noopener">Skeletyl flashing firmware
guide</a>
</li>
<li><a href=https://github.com/qmk/qmk_firmware/issues/18511 target=_blank rel="noreferrer noopener">QMK github issue RP2040 based keyboard not usable from boot</a>
</li>
<li><a href=https://github.com/Bastardkb/bastardkb-qmk/issues/33 target=_blank rel="noreferrer noopener">Skeletyl USB VBUS PIN for splinky
controllers</a>
</li>
</ul>
</div>
<footer>
<p>
&copy; 2020-present <a style=text-decoration:none href=https://github.com/bruhtus/resume target=_blank rel="noreferrer noopener">Robertus Chris</a>
<span>&#183;</span>
<a style=text-decoration:none href=https://bruhtus.github.io/index.xml target=_blank rel="noreferrer noopener">RSS Feed</a>
<span>&#183;</span>
Based on <a style=text-decoration:none href=https://github.com/koirand/pulp/ target=_blank rel="noreferrer noopener">pulp</a> and <a style=text-decoration:none href=https://github.com/adityatelange/hugo-PaperMod target=_blank rel="noreferrer noopener">papermod</a> theme
</p>
</footer>
<button onclick=topFunction() id=myBtn title="Go to top"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#d0d0d0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 15l-6-6-6 6"/></svg>
</button>
<script>var mybutton=document.getElementById("myBtn");window.onscroll=function(){scrollFunction()};function scrollFunction(){document.body.scrollTop>20||document.documentElement.scrollTop>20?mybutton.style.display="block":mybutton.style.display="none"}function topFunction(){document.body.scrollTop=0,document.documentElement.scrollTop=0}</script><script src=https://bruhtus.github.io/js/custom.js></script>
</body>
</html>