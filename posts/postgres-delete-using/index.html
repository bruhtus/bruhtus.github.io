<!doctype html><html>
<head>
<title>
Postgresql's Clause USING on DELETE Statement
</title>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=author content="Robertus Chris">
<link rel="shortcut icon" type=image/x-icon href=https://bruhtus.github.io/img/favicon.ico>
<link rel=stylesheet href=https://bruhtus.github.io/style.min.4f970aa135421035a71bdc9bbd750aa2cfbe0ddb080ab1ec5db4173f45494cad.css integrity="sha256-T5cKoTVCEDWnG9ybvXUKos++DdsICrHsXbQXP0VJTK0=">
<link disabled rel=stylesheet href=https://bruhtus.github.io/style-dark.min.0a647fb6c07e04b77b54fa0515d0a683d39ecdb251dba960fe1f966f7ff36fc2.css media="(prefers-color-scheme: dark)" integrity="sha256-CmR/tsB+BLd7VPoFFdCmg9OezbJR26lg/h+Wb3/zb8I=">
<link rel=stylesheet href=https://use.fontawesome.com/releases/v5.8.1/css/all.css integrity=sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf crossorigin=anonymous>
<link rel=preconnect href=https://fonts.gstatic.com>
<link href="https://fonts.googleapis.com/css2?family=Bitter:wght@300&family=EB+Garamond&family=PT+Sans&family=Sura&family=Zilla+Slab&family=Inconsolata&family=Libre+Baskerville&display=swap" rel=stylesheet>
<link rel=stylesheet href=https://bruhtus.github.io/css/custom.css>
<meta property="og:title" content="Postgresql's Clause USING on DELETE Statement">
<meta property="og:description" content="A Brief Intro The USING clause on DELETE statement is basically let us join multiple table and delete only the data from those join.
If you ever use mysql DELETE JOIN with INNER JOIN, then postgresql USING is kind of similar to that except it can only delete from one table by default.
How? How to do that? Here&rsquo;s an example:
Let&rsquo;s say we have table A and table B which is referenced to table C by id.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://bruhtus.github.io/posts/postgres-delete-using/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2023-06-01T14:07:25+07:00">
<meta property="article:modified_time" content="2023-06-01T14:07:25+07:00">
<meta itemprop=name content="Postgresql's Clause USING on DELETE Statement">
<meta itemprop=description content="A Brief Intro The USING clause on DELETE statement is basically let us join multiple table and delete only the data from those join.
If you ever use mysql DELETE JOIN with INNER JOIN, then postgresql USING is kind of similar to that except it can only delete from one table by default.
How? How to do that? Here&rsquo;s an example:
Let&rsquo;s say we have table A and table B which is referenced to table C by id."><meta itemprop=datePublished content="2023-06-01T14:07:25+07:00">
<meta itemprop=dateModified content="2023-06-01T14:07:25+07:00">
<meta itemprop=wordCount content="181">
<meta itemprop=keywords content="Notes,"><meta name=twitter:card content="summary">
<meta name=twitter:image content="https://bruhtus.github.io//img/">
<meta name=twitter:title content="Postgresql's Clause USING on DELETE Statement">
<meta name=twitter:description content="A Brief Intro The USING clause on DELETE statement is basically let us join multiple table and delete only the data from those join.
If you ever use mysql DELETE JOIN with INNER JOIN, then postgresql USING is kind of similar to that except it can only delete from one table by default.
How? How to do that? Here&rsquo;s an example:
Let&rsquo;s say we have table A and table B which is referenced to table C by id."><!--[if lte IE 9]><script src=https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js></script><![endif]--><!--[if lt IE 9]><script src=https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js></script>
<script src=https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js></script><![endif]-->
</head>
<body>
<h1>Postgresql's Clause USING on DELETE Statement</h1>
<header>
<div class=cd>
<h2><a style=text-decoration:none class=cd href=https://bruhtus.github.io/posts>cd ..</a> || <a style=text-decoration:none class=cd href=https://bruhtus.github.io/>cd</a></h2>
</div>
</header>
<p class=date>
June 1, 2023
<span>&#183;</span>
1 mins
<span>&#183;</span>
Robertus Chris
</p>
<div id=tags>
<ul>
<li><a style=text-decoration:none href=https://bruhtus.github.io/tags/notes/>Notes</a></li>
</ul>
</div>
<div class=toc>
<details>
<summary>
<div class=details>Table of Contents</div>
</summary>
<blockquote><ul><li>
<a style=text-decoration:none href=#a-brief-intro aria-label="A Brief Intro">A Brief Intro</a></li><li>
<a style=text-decoration:none href=#how aria-label=How?>How?</a></li><li>
<a style=text-decoration:none href=#references aria-label=References>References</a></li></ul>
</blockquote>
</details>
</div>
<div id=contentBody>
<h2 id=a-brief-intro>A Brief Intro</h2>
<p>The <code>USING</code> clause on <code>DELETE</code> statement is basically let us join multiple table
and delete only the data from those join.</p>
<p>If you ever use mysql <code>DELETE JOIN</code> with <code>INNER JOIN</code>, then postgresql <code>USING</code>
is <em>kind of</em> similar to that except it can only delete from one table by
default.</p>
<h2 id=how>How?</h2>
<p>How to do that? Here&rsquo;s an example:<br>
Let&rsquo;s say we have table A and table B which is referenced to table C by id. If
we use <code>SELECT</code> statement on table C with <code>INNER JOIN</code> on table A, it would look
like this:</p>
<div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-sql data-lang=sql><span style=color:#6ab825;font-weight:700>SELECT</span><span style=color:#666> </span>*<span style=color:#666>
</span><span style=color:#666></span><span style=color:#6ab825;font-weight:700>FROM</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>C</span><span style=color:#666>
</span><span style=color:#666></span><span style=color:#6ab825;font-weight:700>INNER</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>JOIN</span><span style=color:#666> </span>A<span style=color:#666>
</span><span style=color:#666></span><span style=color:#6ab825;font-weight:700>ON</span><span style=color:#666> </span>A.C_id<span style=color:#666> </span>=<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>C</span>.id;<span style=color:#666>
</span></code></pre></div><p>Now, if we want to <strong>only</strong> delete all records from table C related to table A
without deleting all records from table C related to table B, we can use
<code>DELETE</code> with <code>USING</code> clause like this:</p>
<div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-sql data-lang=sql><span style=color:#6ab825;font-weight:700>DELETE</span><span style=color:#666>
</span><span style=color:#666></span><span style=color:#6ab825;font-weight:700>FROM</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>C</span><span style=color:#666>
</span><span style=color:#666></span><span style=color:#6ab825;font-weight:700>USING</span><span style=color:#666> </span>A<span style=color:#666>
</span><span style=color:#666></span><span style=color:#6ab825;font-weight:700>WHERE</span><span style=color:#666> </span>A.C_id<span style=color:#666> </span>=<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>C</span>.id;<span style=color:#666>
</span></code></pre></div><blockquote>
<p>Please keep in mind that if you haven&rsquo;t set the <code>ON DELETE CASCADE</code> for
table A on reference <code>C_id</code>, that query will throw an error.</p>
</blockquote>
<p>Alright, that&rsquo;s it. See you next time!</p>
<h2 id=references>References</h2>
<ul>
<li><a href=https://www.postgresql.org/docs/current/sql-delete.html target=_blank rel="noreferrer noopener">Postgresql delete
documentation</a>
.</li>
<li><a href=https://www.postgresqltutorial.com/postgresql-tutorial/postgresql-delete-join target=_blank rel="noreferrer noopener">Postgresql delete
using tutorial</a>
.</li>
<li><a href=https://www.mysqltutorial.org/mysql-delete-join target=_blank rel="noreferrer noopener">MySQL delete join
tutorial</a>
.</li>
</ul>
</div>
<footer>
<p>
&copy; 2020-present <a style=text-decoration:none href=https://bruhtus.github.io/resume target=_blank rel="noreferrer noopener">Robertus Chris</a>
<span>&#183;</span>
<a style=text-decoration:none href=https://bruhtus.github.io/index.xml target=_blank rel="noreferrer noopener">RSS Feed</a>
<span>&#183;</span>
Based on <a style=text-decoration:none href=https://github.com/koirand/pulp/ target=_blank rel="noreferrer noopener">pulp</a> and <a style=text-decoration:none href=https://git.io/hugopapermod target=_blank rel="noreferrer noopener">papermod</a> theme
</p>
</footer>
<button onclick=topFunction() id=myBtn title="Go to top"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#d0d0d0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 15l-6-6-6 6"/></svg>
</button>
<script>var mybutton=document.getElementById("myBtn");window.onscroll=function(){scrollFunction()};function scrollFunction(){document.body.scrollTop>20||document.documentElement.scrollTop>20?mybutton.style.display="block":mybutton.style.display="none"}function topFunction(){document.body.scrollTop=0,document.documentElement.scrollTop=0}</script><script src=https://bruhtus.github.io/js/custom.js></script>
</body>
</html>