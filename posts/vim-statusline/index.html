<!doctype html><html>
<head>
<title>
Guide to Make Your Own Vim/Neovim Statusline
</title>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=author content="Robertus Chris">
<link rel="shortcut icon" type=image/x-icon href=https://bruhtus.github.io/img/favicon.ico>
<link rel=stylesheet href=https://bruhtus.github.io/style.min.4f970aa135421035a71bdc9bbd750aa2cfbe0ddb080ab1ec5db4173f45494cad.css integrity="sha256-T5cKoTVCEDWnG9ybvXUKos++DdsICrHsXbQXP0VJTK0=">
<link disabled rel=stylesheet href=https://bruhtus.github.io/style-dark.min.0a647fb6c07e04b77b54fa0515d0a683d39ecdb251dba960fe1f966f7ff36fc2.css media="(prefers-color-scheme: dark)" integrity="sha256-CmR/tsB+BLd7VPoFFdCmg9OezbJR26lg/h+Wb3/zb8I=">
<link rel=stylesheet href=https://use.fontawesome.com/releases/v5.8.1/css/all.css integrity=sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf crossorigin=anonymous>
<link rel=preconnect href=https://fonts.gstatic.com>
<link href="https://fonts.googleapis.com/css2?family=Bitter:wght@300&family=EB+Garamond&family=PT+Sans&family=Sura&family=Zilla+Slab&family=Inconsolata&family=Libre+Baskerville&display=swap" rel=stylesheet>
<link rel=stylesheet href=https://bruhtus.github.io/css/custom.css>
<meta property="og:title" content="Guide to Make Your Own Vim/Neovim Statusline">
<meta property="og:description" content="We don&rsquo;t have to install vim plugin to get a statusline if we don&rsquo;t want to.
 Introduction Hi everyone! In this post I will talk about making your custom statusline in vim. There are a lot of plugins out there that makes vim statusline way better and works out of the box.
&ldquo;Why would someone going through all the trouble while there&rsquo;s a plugin for that?&rdquo;, you might ask.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://bruhtus.github.io/posts/vim-statusline/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2021-08-20T08:31:29+07:00">
<meta property="article:modified_time" content="2021-08-20T08:31:29+07:00">
<meta itemprop=name content="Guide to Make Your Own Vim/Neovim Statusline">
<meta itemprop=description content="We don&rsquo;t have to install vim plugin to get a statusline if we don&rsquo;t want to.
 Introduction Hi everyone! In this post I will talk about making your custom statusline in vim. There are a lot of plugins out there that makes vim statusline way better and works out of the box.
&ldquo;Why would someone going through all the trouble while there&rsquo;s a plugin for that?&rdquo;, you might ask."><meta itemprop=datePublished content="2021-08-20T08:31:29+07:00">
<meta itemprop=dateModified content="2021-08-20T08:31:29+07:00">
<meta itemprop=wordCount content="1118">
<meta itemprop=keywords content="Vim,"><meta name=twitter:card content="summary">
<meta name=twitter:image content="https://bruhtus.github.io//img/">
<meta name=twitter:title content="Guide to Make Your Own Vim/Neovim Statusline">
<meta name=twitter:description content="We don&rsquo;t have to install vim plugin to get a statusline if we don&rsquo;t want to.
 Introduction Hi everyone! In this post I will talk about making your custom statusline in vim. There are a lot of plugins out there that makes vim statusline way better and works out of the box.
&ldquo;Why would someone going through all the trouble while there&rsquo;s a plugin for that?&rdquo;, you might ask."><!--[if lte IE 9]><script src=https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js></script><![endif]--><!--[if lt IE 9]><script src=https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js></script>
<script src=https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js></script><![endif]-->
</head>
<body>
<h1>Guide to Make Your Own Vim/Neovim Statusline</h1>
<header>
<div class=cd>
<h2><a style=text-decoration:none class=cd href=https://bruhtus.github.io//posts>cd ..</a> | <a style=text-decoration:none class=cd href=https://bruhtus.github.io/>cd</a></h2>
</div>
</header>
<p class=date>
August 20, 2021
<span>&#183;</span>
6 mins
<span>&#183;</span>
Robertus Chris
</p>
<div id=tags>
<ul>
<li><a style=text-decoration:none href=https://bruhtus.github.io/tags/vim/>Vim</a></li>
</ul>
</div>
<div class=toc>
<details>
<summary>
<div class=details>Table of Contents</div>
</summary>
<blockquote><ul><li>
<a style=text-decoration:none href=#introduction aria-label=Introduction>Introduction</a></li><li>
<a style=text-decoration:none href=#requirements aria-label=Requirements>Requirements</a></li><li>
<a style=text-decoration:none href=#disable-old-statusline aria-label="Disable Old Statusline">Disable Old Statusline</a></li><li>
<a style=text-decoration:none href=#different-statusline-for-active-and-inactive-window aria-label="Different statusline for active and inactive window">Different statusline for active and inactive window</a><ul>
<li>
<a style=text-decoration:none href=#current-mode-in-statusline aria-label="Current Mode in Statusline">Current Mode in Statusline</a></li><li>
<a style=text-decoration:none href=#git-branch-in-statusline aria-label="Git Branch in Statusline">Git Branch in Statusline</a></li></ul>
</li><li>
<a style=text-decoration:none href=#same-statusline-for-active-and-inactive-window aria-label="Same Statusline for active and inactive window">Same Statusline for active and inactive window</a></li><li>
<a style=text-decoration:none href=#conclusion aria-label=Conclusion>Conclusion</a></li><li>
<a style=text-decoration:none href=#references aria-label=References>References</a></li></ul>
</blockquote>
</details>
</div>
<div id=contentBody>
<blockquote>
<p>We don&rsquo;t have to install vim plugin to get a statusline if we don&rsquo;t want to.</p>
</blockquote>
<h2 id=introduction>Introduction</h2>
<p>Hi everyone! In this post I will talk about making your custom statusline in vim. There are a lot of plugins out there that makes vim statusline way better and works out of the box.</p>
<p>&ldquo;Why would someone going through all the trouble while there&rsquo;s a plugin for that?&rdquo;, you might ask. Well, for me personally, having one less plugin is a good thing. I don&rsquo;t really want to depend on the plugin for something simple such as statusline. If I can build it myself, then I will build it myself rather than using a plugin. Also, it save me a lot of time to figure out which plugin causes the issue if I have less plugin! Oh, another thing, some vim statusline plugin can slow down your startup time (I&rsquo;m looking at you <code>vim-airline</code>) so be careful about that. Alright then, let&rsquo;s get into it!</p>
<h2 id=requirements>Requirements</h2>
<p>Before we start, we need to prepare a few things:</p>
<ul>
<li>Vim/Neovim (we will use <code>vim script</code> or <code>VimL</code> in this post)</li>
<li><code>set laststatus=2</code> (always display the statusline)</li>
<li>Patience (don&rsquo;t be scared when you see an error, calm down!)</li>
</ul>
<p>If all is set, then let&rsquo;s get started!</p>
<h2 id=disable-old-statusline>Disable Old Statusline</h2>
<p>Before we move further, you need to disable or remove your old statusline plugin and the config. If you don&rsquo;t want to remove your old statusline plugin config, you can commented out those line/config in your vimrc or init.vim.</p>
<h2 id=different-statusline-for-active-and-inactive-window>Different statusline for active and inactive window</h2>
<p>You can have different statusline for active and inactive window by using <code>autocmd</code> event. &ldquo;What is <code>autocmd</code>?&rdquo; you might ask, go take a look at <code>:help autocmd</code> for more info. To make it simple, <code>autocmd</code> is to automatically execute a command on certain event which you can check on <code>:help autocmd-events</code> for more info.</p>
<p>So, how can we have different statusline for active and inactive window? First, we need to make a function to define our active or inactive statusline component. You can create the function similar to this:</p>
<div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-vim data-lang=vim><span style="margin-right:.4em;padding:0 .4em;color:#686868"> 1</span><span style=color:#999;font-style:italic>&#34; component for active window</span><span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868"> 2</span><span style=color:#a61717;background-color:#e3d2d2></span><span style=color:#6ab825;font-weight:700>function</span>! StatuslineActive()<span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868"> 3</span><span style=color:#a61717;background-color:#e3d2d2></span><span style=color:#999;font-style:italic>  &#34; the component goes here</span><span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868"> 4</span><span style=color:#a61717;background-color:#e3d2d2></span><span style=color:#6ab825;font-weight:700>endfunction</span><span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868"> 5</span><span style=color:#a61717;background-color:#e3d2d2></span><span style=color:#999;font-style:italic>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868"> 6</span><span style=color:#999;font-style:italic>&#34; component for inactive window</span><span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868"> 7</span><span style=color:#a61717;background-color:#e3d2d2></span><span style=color:#6ab825;font-weight:700>function</span>! StatuslineInactive()<span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868"> 8</span><span style=color:#a61717;background-color:#e3d2d2></span><span style=color:#999;font-style:italic>  &#34; the component goes here</span><span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868"> 9</span><span style=color:#a61717;background-color:#e3d2d2></span><span style=color:#6ab825;font-weight:700>endfunction</span><span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">10</span><span style=color:#a61717;background-color:#e3d2d2></span><span style=color:#999;font-style:italic>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">11</span><span style=color:#999;font-style:italic>&#34; load statusline using `autocmd` event with this function</span><span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">12</span><span style=color:#a61717;background-color:#e3d2d2></span><span style=color:#6ab825;font-weight:700>function</span>! StatuslineLoad(mode)<span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">13</span><span style=color:#a61717;background-color:#e3d2d2></span>  <span style=color:#6ab825;font-weight:700>if</span> a:mode ==# <span style=color:#ed9d13>&#39;active&#39;</span><span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">14</span><span style=color:#a61717;background-color:#e3d2d2></span><span style=color:#999;font-style:italic>    &#34; to make it simple, %! is to evaluate the current changes in the window</span><span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">15</span><span style=color:#a61717;background-color:#e3d2d2></span><span style=color:#999;font-style:italic>    &#34; it can be useful for evaluate current mode in statusline. For more info:</span><span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">16</span><span style=color:#a61717;background-color:#e3d2d2></span><span style=color:#999;font-style:italic>    &#34; :help statusline.</span><span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">17</span><span style=color:#a61717;background-color:#e3d2d2></span>    setlocal statusline=%!StatuslineActive()<span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">18</span><span style=color:#a61717;background-color:#e3d2d2></span>  <span style=color:#6ab825;font-weight:700>else</span><span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">19</span><span style=color:#a61717;background-color:#e3d2d2></span>    setlocal statusline=%!StatuslineInactive()<span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">20</span><span style=color:#a61717;background-color:#e3d2d2></span>  <span style=color:#6ab825;font-weight:700>endif</span><span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">21</span><span style=color:#a61717;background-color:#e3d2d2></span><span style=color:#6ab825;font-weight:700>endfunction</span><span style=color:#a61717;background-color:#e3d2d2>
</span></code></pre></div><p>and also the <code>autocmd</code> similar to this:</p>
<div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-vim data-lang=vim><span style="margin-right:.4em;padding:0 .4em;color:#686868">1</span><span style=color:#999;font-style:italic>&#34; so that autocmd didn&#39;t stack up and slow down vim</span><span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">2</span><span style=color:#a61717;background-color:#e3d2d2></span>augroup statusline_startup<span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">3</span><span style=color:#a61717;background-color:#e3d2d2></span>  autocmd!<span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">4</span><span style=color:#a61717;background-color:#e3d2d2></span><span style=color:#999;font-style:italic>  &#34; for more info :help WinEnter and :help BufWinEnter</span><span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">5</span><span style=color:#a61717;background-color:#e3d2d2></span>  autocmd WinEnter,BufWinEnter * call StatuslineLoad(<span style=color:#ed9d13>&#39;active&#39;</span>)<span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">6</span><span style=color:#a61717;background-color:#e3d2d2></span>  autocmd WinLeave * call StatuslineLoad(<span style=color:#ed9d13>&#39;inactive&#39;</span>)<span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">7</span><span style=color:#a61717;background-color:#e3d2d2></span>augroup END<span style=color:#a61717;background-color:#e3d2d2>
</span></code></pre></div><p>Now we can compose our statusline component. We can take a look at <code>:help statusline</code> for supported items like for example <code>f</code> for relative path to the file in the buffer. You can choose whatever item you like in your statusline, and put it in the previous function similar to this:</p>
<div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-vim data-lang=vim><span style="margin-right:.4em;padding:0 .4em;color:#686868">1</span><span style=color:#6ab825;font-weight:700>function</span>! StatuslineActive()<span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">2</span><span style=color:#a61717;background-color:#e3d2d2></span><span style=color:#999;font-style:italic>  &#34; if we want to add `f` items in our statusline</span><span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">3</span><span style=color:#a61717;background-color:#e3d2d2></span>  <span style=color:#6ab825;font-weight:700>let</span> l:filename = <span style=color:#ed9d13>&#39;%f&#39;</span><span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">4</span><span style=color:#a61717;background-color:#e3d2d2></span><span style=color:#999;font-style:italic>  &#34; if we want to add &#39;m&#39; items in our statusline</span><span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">5</span><span style=color:#a61717;background-color:#e3d2d2></span>  <span style=color:#6ab825;font-weight:700>let</span> l:mod = <span style=color:#ed9d13>&#39;%m&#39;</span><span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">6</span><span style=color:#a61717;background-color:#e3d2d2></span><span style=color:#999;font-style:italic>  &#34; the `.` is basically to ignore whitespace before and put it right after the previous component</span><span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">7</span><span style=color:#a61717;background-color:#e3d2d2></span>  return l:filename.l:mod<span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">8</span><span style=color:#a61717;background-color:#e3d2d2></span><span style=color:#6ab825;font-weight:700>endfunction</span><span style=color:#a61717;background-color:#e3d2d2>
</span></code></pre></div><p>Why we need to do that? well, I&rsquo;ll explain it in next section</p>
<h3 id=current-mode-in-statusline>Current Mode in Statusline</h3>
<p>If you want to put your current mode in your statusline, you can do it with a function similar to this:</p>
<div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-vim data-lang=vim><span style="margin-right:.4em;padding:0 .4em;color:#686868"> 1</span><span style=color:#6ab825;font-weight:700>function</span>! StatuslineMode() abort<span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868"> 2</span><span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868"> 3</span><span style=color:#a61717;background-color:#e3d2d2></span>    <span style=color:#6ab825;font-weight:700>let</span> l:currentmode={<span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868"> 4</span><span style=color:#a61717;background-color:#e3d2d2></span>        \ <span style=color:#ed9d13>&#39;n&#39;</span>:  <span style=color:#ed9d13>&#39;N&#39;</span>,<span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868"> 5</span><span style=color:#a61717;background-color:#e3d2d2></span>        \ <span style=color:#ed9d13>&#39;v&#39;</span>:  <span style=color:#ed9d13>&#39;V&#39;</span>,<span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868"> 6</span><span style=color:#a61717;background-color:#e3d2d2></span>        \ <span style=color:#ed9d13>&#39;V&#39;</span>:  <span style=color:#ed9d13>&#39;VL&#39;</span>,<span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868"> 7</span><span style=color:#a61717;background-color:#e3d2d2></span>        \ <span style=color:#ed9d13>&#39;^V&#39;</span>: <span style=color:#ed9d13>&#39;VB&#39;</span>,<span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868"> 8</span><span style=color:#a61717;background-color:#e3d2d2></span>        \ <span style=color:#ed9d13>&#39;s&#39;</span>:  <span style=color:#ed9d13>&#39;S&#39;</span>,<span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868"> 9</span><span style=color:#a61717;background-color:#e3d2d2></span>        \ <span style=color:#ed9d13>&#39;S&#39;</span>:  <span style=color:#ed9d13>&#39;SL&#39;</span>,<span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">10</span><span style=color:#a61717;background-color:#e3d2d2></span>        \ <span style=color:#ed9d13>&#39;^S&#39;</span>: <span style=color:#ed9d13>&#39;SB&#39;</span>,<span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">11</span><span style=color:#a61717;background-color:#e3d2d2></span>        \ <span style=color:#ed9d13>&#39;i&#39;</span>:  <span style=color:#ed9d13>&#39;I&#39;</span>,<span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">12</span><span style=color:#a61717;background-color:#e3d2d2></span>        \ <span style=color:#ed9d13>&#39;R&#39;</span>:  <span style=color:#ed9d13>&#39;R&#39;</span>,<span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">13</span><span style=color:#a61717;background-color:#e3d2d2></span>        \ <span style=color:#ed9d13>&#39;c&#39;</span>:  <span style=color:#ed9d13>&#39;C&#39;</span>,<span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">14</span><span style=color:#a61717;background-color:#e3d2d2></span>        \ <span style=color:#ed9d13>&#39;t&#39;</span>:  <span style=color:#ed9d13>&#39;T&#39;</span>}<span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">15</span><span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">16</span><span style=color:#a61717;background-color:#e3d2d2></span>    <span style=color:#6ab825;font-weight:700>let</span> l:modecurrent = mode()<span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">17</span><span style=color:#a61717;background-color:#e3d2d2></span><span style=color:#999;font-style:italic>    &#34; use get() -&gt; fails safely, since ^V doesn&#39;t seem to register</span><span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">18</span><span style=color:#a61717;background-color:#e3d2d2></span><span style=color:#999;font-style:italic>    &#34; 3rd arg is used when return of mode() == 0, which is case with ^V</span><span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">19</span><span style=color:#a61717;background-color:#e3d2d2></span><span style=color:#999;font-style:italic>    &#34; thus, ^V fails -&gt; returns 0 -&gt; replaced with &#39;VB&#39;</span><span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">20</span><span style=color:#a61717;background-color:#e3d2d2></span>    <span style=color:#6ab825;font-weight:700>let</span> l:modelist = toupper(get(l:currentmode, l:modecurrent, <span style=color:#ed9d13>&#39;VB&#39;</span>))<span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">21</span><span style=color:#a61717;background-color:#e3d2d2></span>    <span style=color:#6ab825;font-weight:700>let</span> l:current_status_mode = l:modelist<span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">22</span><span style=color:#a61717;background-color:#e3d2d2></span>    return l:current_status_mode<span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">23</span><span style=color:#a61717;background-color:#e3d2d2></span><span style=color:#6ab825;font-weight:700>endfunction</span><span style=color:#a61717;background-color:#e3d2d2>
</span></code></pre></div><p>and put it inside of your statusline function like this:</p>
<div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-vim data-lang=vim><span style="margin-right:.4em;padding:0 .4em;color:#686868">1</span><span style=color:#6ab825;font-weight:700>function</span>! StatuslineActive()<span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">2</span><span style=color:#a61717;background-color:#e3d2d2></span>  <span style=color:#6ab825;font-weight:700>let</span> l:filename = <span style=color:#ed9d13>&#39;%f&#39;</span><span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">3</span><span style=color:#a61717;background-color:#e3d2d2></span>  <span style=color:#6ab825;font-weight:700>let</span> l:mod = <span style=color:#ed9d13>&#39;%m&#39;</span><span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">4</span><span style=color:#a61717;background-color:#e3d2d2></span><span style=color:#999;font-style:italic>  &#34; `w:` is basically local variable to current window</span><span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">5</span><span style=color:#a61717;background-color:#e3d2d2></span><span style=color:#999;font-style:italic>  &#34; and `l:` is basically local variable to function. For more info :help E121</span><span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">6</span><span style=color:#a61717;background-color:#e3d2d2></span>  <span style=color:#6ab825;font-weight:700>let</span> w:mode = <span style=color:#ed9d13>&#39;%{StatuslineMode()}&#39;</span><span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">7</span><span style=color:#a61717;background-color:#e3d2d2></span>  return w:mode.l:filename.l:mod<span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">8</span><span style=color:#a61717;background-color:#e3d2d2></span><span style=color:#6ab825;font-weight:700>endfunction</span><span style=color:#a61717;background-color:#e3d2d2>
</span></code></pre></div><p>Now, if we want to change the current mode background based on the current mode, we can do something like this:</p>
<div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-vim data-lang=vim><span style="margin-right:.4em;padding:0 .4em;color:#686868"> 1</span><span style=color:#999;font-style:italic>&#34; define Normal mode color, Insert mode color, and so on</span><span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868"> 2</span><span style=color:#a61717;background-color:#e3d2d2></span>hi NormalModeColor ctermbg=... ctermfg=... guifg=#... guibg=#...<span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868"> 3</span><span style=color:#a61717;background-color:#e3d2d2></span>hi InsertModeColor ctermbg=... ctermfg=... guifg=#... guibg=#...<span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868"> 4</span><span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868"> 5</span><span style=color:#a61717;background-color:#e3d2d2></span><span style=color:#6ab825;font-weight:700>function</span>! StatuslineActive()<span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868"> 6</span><span style=color:#a61717;background-color:#e3d2d2></span>  <span style=color:#6ab825;font-weight:700>let</span> l:filename = <span style=color:#ed9d13>&#39;%f&#39;</span><span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868"> 7</span><span style=color:#a61717;background-color:#e3d2d2></span>  <span style=color:#6ab825;font-weight:700>let</span> l:mod = <span style=color:#ed9d13>&#39;%m&#39;</span><span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868"> 8</span><span style=color:#a61717;background-color:#e3d2d2></span>  <span style=color:#6ab825;font-weight:700>if</span> mode() ==# <span style=color:#ed9d13>&#39;n&#39;</span><span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868"> 9</span><span style=color:#a61717;background-color:#e3d2d2></span>    <span style=color:#6ab825;font-weight:700>let</span> w:mode = <span style=color:#ed9d13>&#39;%#NormalModeColor#%{StatuslineMode()}&#39;</span><span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">10</span><span style=color:#a61717;background-color:#e3d2d2></span>  <span style=color:#6ab825;font-weight:700>elseif</span> mode() ==# v:insertmode<span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">11</span><span style=color:#a61717;background-color:#e3d2d2></span>    <span style=color:#6ab825;font-weight:700>let</span> w:mode = <span style=color:#ed9d13>&#39;%#InsertModeColor#%{StatuslineMode()}&#39;</span><span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">12</span><span style=color:#a61717;background-color:#e3d2d2></span>  <span style=color:#6ab825;font-weight:700>endif</span><span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">13</span><span style=color:#a61717;background-color:#e3d2d2></span><span style=color:#999;font-style:italic>  &#34; %* is basically to restore highlight to StatusLine highlight group</span><span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">14</span><span style=color:#a61717;background-color:#e3d2d2></span>  return w:mode.<span style=color:#ed9d13>&#39;%* &#39;</span>.l:filename.l:mod<span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">15</span><span style=color:#a61717;background-color:#e3d2d2></span><span style=color:#6ab825;font-weight:700>endfunction</span><span style=color:#a61717;background-color:#e3d2d2>
</span></code></pre></div><h3 id=git-branch-in-statusline>Git Branch in Statusline</h3>
<p>If you install <code>vim-fugitive</code> plugin, then you can use <code>fugitive#head()</code> in your statusline like this:</p>
<div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-vim data-lang=vim><span style="margin-right:.4em;padding:0 .4em;color:#686868"> 1</span><span style=color:#6ab825;font-weight:700>function</span>! StatuslineActive()<span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868"> 2</span><span style=color:#a61717;background-color:#e3d2d2></span>  <span style=color:#6ab825;font-weight:700>let</span> l:filename = <span style=color:#ed9d13>&#39;%f&#39;</span><span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868"> 3</span><span style=color:#a61717;background-color:#e3d2d2></span>  <span style=color:#6ab825;font-weight:700>let</span> l:mod = <span style=color:#ed9d13>&#39;%m&#39;</span><span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868"> 4</span><span style=color:#a61717;background-color:#e3d2d2></span>  <span style=color:#6ab825;font-weight:700>if</span> mode() ==# <span style=color:#ed9d13>&#39;n&#39;</span><span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868"> 5</span><span style=color:#a61717;background-color:#e3d2d2></span>    <span style=color:#6ab825;font-weight:700>let</span> w:mode = <span style=color:#ed9d13>&#39;%#NormalModeColor#%{StatuslineMode()}&#39;</span><span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868"> 6</span><span style=color:#a61717;background-color:#e3d2d2></span>  <span style=color:#6ab825;font-weight:700>elseif</span> mode() ==# v:insertmode<span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868"> 7</span><span style=color:#a61717;background-color:#e3d2d2></span>    <span style=color:#6ab825;font-weight:700>let</span> w:mode = <span style=color:#ed9d13>&#39;%#InsertModeColor#%{StatuslineMode()}&#39;</span><span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868"> 8</span><span style=color:#a61717;background-color:#e3d2d2></span>  <span style=color:#6ab825;font-weight:700>endif</span><span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868"> 9</span><span style=color:#a61717;background-color:#e3d2d2></span><span style=color:#999;font-style:italic>  &#34; make sure it doesn&#39;t throw an error if `vim-fugitive` is not installed</span><span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">10</span><span style=color:#a61717;background-color:#e3d2d2></span>  <span style=color:#6ab825;font-weight:700>let</span> l:git = <span style=color:#ed9d13>&#34;%{exists(&#39;*FugitiveHead&#39;) ? fugitive#head() : &#39;&#39;}&#34;</span><span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">11</span><span style=color:#a61717;background-color:#e3d2d2></span><span style=color:#999;font-style:italic>  &#34; to separate left and right side</span><span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">12</span><span style=color:#a61717;background-color:#e3d2d2></span>  <span style=color:#6ab825;font-weight:700>let</span> l:sep = <span style=color:#ed9d13>&#39;%=&#39;</span><span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">13</span><span style=color:#a61717;background-color:#e3d2d2></span>  return w:mode.<span style=color:#ed9d13>&#39;%* &#39;</span>.l:filename.l:mod.l:sep.l:git<span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">14</span><span style=color:#a61717;background-color:#e3d2d2></span><span style=color:#6ab825;font-weight:700>endfunction</span><span style=color:#a61717;background-color:#e3d2d2>
</span></code></pre></div><p>alternatively, you can use <code>system()</code> command to get the current git branch (for more info <code>:help system()</code>) like this:</p>
<div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-vim data-lang=vim><span style="margin-right:.4em;padding:0 .4em;color:#686868"> 1</span><span style=color:#6ab825;font-weight:700>function</span>! StatuslineActive()<span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868"> 2</span><span style=color:#a61717;background-color:#e3d2d2></span>  <span style=color:#6ab825;font-weight:700>let</span> l:filename = <span style=color:#ed9d13>&#39;%f&#39;</span><span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868"> 3</span><span style=color:#a61717;background-color:#e3d2d2></span>  <span style=color:#6ab825;font-weight:700>let</span> l:mod = <span style=color:#ed9d13>&#39;%m&#39;</span><span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868"> 4</span><span style=color:#a61717;background-color:#e3d2d2></span>  <span style=color:#6ab825;font-weight:700>if</span> mode() ==# <span style=color:#ed9d13>&#39;n&#39;</span><span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868"> 5</span><span style=color:#a61717;background-color:#e3d2d2></span>    <span style=color:#6ab825;font-weight:700>let</span> w:mode = <span style=color:#ed9d13>&#39;%#NormalModeColor#%{StatuslineMode()}&#39;</span><span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868"> 6</span><span style=color:#a61717;background-color:#e3d2d2></span>  <span style=color:#6ab825;font-weight:700>elseif</span> mode() ==# v:insertmode<span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868"> 7</span><span style=color:#a61717;background-color:#e3d2d2></span>    <span style=color:#6ab825;font-weight:700>let</span> w:mode = <span style=color:#ed9d13>&#39;%#InsertModeColor#%{StatuslineMode()}&#39;</span><span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868"> 8</span><span style=color:#a61717;background-color:#e3d2d2></span>  <span style=color:#6ab825;font-weight:700>endif</span><span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868"> 9</span><span style=color:#a61717;background-color:#e3d2d2></span><span style=color:#999;font-style:italic>  &#34; for more info :help E121</span><span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">10</span><span style=color:#a61717;background-color:#e3d2d2></span>  <span style=color:#6ab825;font-weight:700>let</span> g:gitbranchcmd = <span style=color:#ed9d13>&#34;git branch --show-current 2&gt;/dev/null | tr -d &#39;\n&#39;&#34;</span><span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">11</span><span style=color:#a61717;background-color:#e3d2d2></span><span style=color:#999;font-style:italic>  &#34; use system() if vim-fugitive not installed</span><span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">12</span><span style=color:#a61717;background-color:#e3d2d2></span>  <span style=color:#6ab825;font-weight:700>let</span> l:git = <span style=color:#ed9d13>&#34;%{exists(&#39;*FugitiveHead&#39;) ? fugitive#head() : system(g:gitbranchcmd)}&#34;</span><span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">13</span><span style=color:#a61717;background-color:#e3d2d2></span>  <span style=color:#6ab825;font-weight:700>let</span> l:sep = <span style=color:#ed9d13>&#39;%=&#39;</span><span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">14</span><span style=color:#a61717;background-color:#e3d2d2></span>  return w:mode.<span style=color:#ed9d13>&#39;%* &#39;</span>.l:filename.l:mod.l:sep.l:git<span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">15</span><span style=color:#a61717;background-color:#e3d2d2></span><span style=color:#6ab825;font-weight:700>endfunction</span><span style=color:#a61717;background-color:#e3d2d2>
</span></code></pre></div><h2 id=same-statusline-for-active-and-inactive-window>Same Statusline for active and inactive window</h2>
<p>Now, if we want our statusline to be the same whether in active or inactive window. We can make simplify it by only make one function and not using <code>autocmd</code>. It will look something like this:</p>
<div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-vim data-lang=vim><span style="margin-right:.4em;padding:0 .4em;color:#686868">1</span><span style=color:#6ab825;font-weight:700>function</span>! StatuslineComponent()<span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">2</span><span style=color:#a61717;background-color:#e3d2d2></span><span style=color:#999;font-style:italic>  &#34; your component goes here</span><span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">3</span><span style=color:#a61717;background-color:#e3d2d2></span><span style=color:#6ab825;font-weight:700>endfunction</span><span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">4</span><span style=color:#a61717;background-color:#e3d2d2>
</span><span style="margin-right:.4em;padding:0 .4em;color:#686868">5</span><span style=color:#a61717;background-color:#e3d2d2></span>set statusline=%!StatuslineComponent()<span style=color:#a61717;background-color:#e3d2d2>
</span></code></pre></div><p>and you can use some tips from previous section too!</p>
<h2 id=conclusion>Conclusion</h2>
<p>This guide is for <code>do-it-yourself</code> kind of people, so it&rsquo;s only giving some pointer you can use to make your own statusline. I don&rsquo;t want to tell you what to put in your statusline, it is your OWN statusline after all, so you need to know what you want in it. Also, I&rsquo;m not a vim script expert so please forgive me if I miss something. If you have any question regarding this post, feel free to hit me up on twitter (@diawanchris)! See you later!</p>
<h2 id=references>References</h2>
<ul>
<li><a href=https://kadekillary.work/post/statusline-vim/ target=_blank rel="noreferrer noopener">Kade Killary blog post</a>
.</li>
<li><a href=https://github.com/junegunn/dotfiles/blob/057ee47465e43aafbd20f4c8155487ef147e29ea/vimrc#L265-L275 target=_blank rel="noreferrer noopener">Junegunn&rsquo;s statusline</a>
.</li>
</ul>
</div>
<footer>
<p>
&copy; 2020-present <a style=text-decoration:none href=https://bruhtus.github.io/resume target=_blank rel="noreferrer noopener">Robertus Chris</a>
<span>&#183;</span>
<a style=text-decoration:none href=https://bruhtus.github.io/index.xml target=_blank rel="noreferrer noopener">RSS Feed</a>
<span>&#183;</span>
Based on <a style=text-decoration:none href=https://github.com/koirand/pulp/ target=_blank rel="noreferrer noopener">pulp</a> and <a style=text-decoration:none href=https://git.io/hugopapermod target=_blank rel="noreferrer noopener">papermod</a> theme
</p>
</footer>
<button onclick=topFunction() id=myBtn title="Go to top"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#d0d0d0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 15l-6-6-6 6"/></svg>
</button>
<script>var mybutton=document.getElementById("myBtn");window.onscroll=function(){scrollFunction()};function scrollFunction(){document.body.scrollTop>20||document.documentElement.scrollTop>20?mybutton.style.display="block":mybutton.style.display="none"}function topFunction(){document.body.scrollTop=0,document.documentElement.scrollTop=0}</script><script src=https://bruhtus.github.io/js/custom.js></script>
</body>
</html>